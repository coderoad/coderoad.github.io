---
layout: docs
title: Unit Testing
id: tests
file: 2016-01-05-tests.md
---

Unit tests are used to determine:

* if a task passes or fails
* feedback a user gets when a test fails

Tests are loaded in their order from the tutorial markdown files, and concat together into one temporary file. This means that any import or require statements placed at the top of the first file will be shared by all tests for that page.

Tests should indicate which task they are, in order to quickly determine which task index has failed. For the *mocha-coderoad* test runner, this is as easy as adding the task number to describe block.

    describe('01 first task', function () { ... });
    describe('04 fourth task', function () { ... });


### Test Statements

It makes sense to write test statements using 'should', 'must' or negative statements. Remember, the failing test message will be delivered as feedback to the user.

    it('should be a function')
    it('must be a function')
    it('isn\'t a function')


### Loaders

Use a **loader** to run the user saved file in the context of your file. Think of a loader as a way to place the file your testing inside of your test file. Import your loader and run it on a specific user file.

    var loadJS = require('path/to/loadJS').default;
    loadJS('user-file.js');
    // adds file contents here

You'll have to roll your own loader to fit your project, but there are example [loaders](#loaders) included later in the docs.

*Note: When using spies, stubs or mocks, initiate them above your loader call.*



### Loading Data Files

Data can be loaded in the user's file by setting it as a global within the test. Remember, the top of the test file (above the loader), acts as the top of the user's page.

Although bad practice, it can be easiest to set data to the global scope.

    if (!global.data) {
      global.data = 43;
    }

    if (!global.data2) {
      global.data2 = JSON.parse(JSON.stringify(require('./data2.json')));
    }

Users can access global data by name in their file.

    var secret = data - 1;
